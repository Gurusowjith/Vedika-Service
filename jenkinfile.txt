node{
   stage('SCM Checkout'){
       git credentialsId: 'git-creds', url: 'https://github.com/shivastunts0327/Vedika-Service.git'
   }
   stage('gradle Package'){
     def gradleHome = tool name: 'gradle', type: 'gradle'
     def gradleCMD = "${gradleHome}/bin/gradle"
     sh "${gradleCMD} clean build"
     sshagent(['545b0e5f-55ae-4456-ad19-40875d353c6c']) {
  // some block
}
    }
   sshPublisher(publishers: [sshPublisherDesc(configName: 'artifact', transfers: [sshTransfer(cleanRemote: false, excludes: '', execCommand: '', execTimeout: 120000, flatten: false, makeEmptyDirs: false, noDefaultExcludes: false, patternSeparator: '[, ]+', remoteDirectory: '/home/ubuntu', remoteDirectorySDF: false, removePrefix: 'var/lib/jenkins/workspace/service app', sourceFiles: 'var/lib/jenkins/workspace/service app/**/*')], usePromotionTimestamp: false, useWorkspaceInPromotion: false, verbose: false)])
sshPut(  
def remote = [:]
    remote.name = 'artifact'
    remote.host = '10-0-3-52'
    remote.user = 'ubuntu'
    remote.password = 'ubuntu'
    remote.allowAnyHosts = true
    stage('Remote SSH') {
      sshPut remote: remote, from: '/var/lib/jenkins/workspace/service app/build/libs/*', into: '/home/ubuntu'
    }
   ) 
   }
   
   
   

  


